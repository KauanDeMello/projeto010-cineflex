{"ast":null,"code":"var _jsxFileName = \"/home/kauan/Documents/ProjetosDriven/projeto10-cineflex/projeto10-cineflex/src/components/Seats/Seats.js\",\n    _s = $RefreshSig$();\n\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { getSeats, postBooking } from '../../services/cineflex';\nimport Footer from '../Footer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Seat(_ref) {\n  let {\n    seat,\n    selectSeat\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `seat ${seat.isAvailable ? '' : 'unavailable'} ${seat.selected ? 'selected' : ''}`,\n      onClick: () => selectSeat(seat.id),\n      children: seat.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_c = Seat;\nexport default function Seats() {\n  _s();\n\n  const [showtime, setShowtime] = useState({});\n  const [seats, setSeats] = useState([]);\n  const [form, setForm] = useState({});\n  const {\n    showtimeId\n  } = useParams();\n  const navigate = useNavigate();\n\n  function handleForm(_ref2) {\n    let {\n      value,\n      name\n    } = _ref2;\n    console.log(name, value);\n    setForm({ ...form,\n      [name]: value\n    });\n  }\n\n  function sendForm() {\n    console.log(form);\n    const seatsId = seats.filter(value => value.selected).map(value => value.id);\n    const body = {\n      ids: seatsId,\n      ...form\n    };\n    navigate('/sucesso', {\n      state: {\n        showtime,\n        form,\n        seatsId\n      }\n    }); // postBooking(body).then((res) => {\n    //   console.log(res.data);\n    //   navigate('/sucesso');\n    // });\n  }\n\n  function selectSeat(seatId) {\n    const newSeats = seats.map(value => {\n      if (value.id === seatId && value.isAvailable) {\n        return { ...value,\n          selected: !value.selected\n        };\n      }\n\n      return { ...value\n      };\n    });\n    setSeats([...newSeats]);\n  }\n\n  useEffect(() => {\n    getSeats(showtimeId).then(res => {\n      console.log(res.data);\n      setShowtime(res.data);\n      setSeats(res.data.seats);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-seats\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-title\",\n        children: \"Selecione os assentos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seat-list\",\n        children: seats.length !== 0 ? seats.map(value => /*#__PURE__*/_jsxDEV(Seat, {\n          seat: value,\n          selectSeat: selectSeat\n        }, value.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this)) : 'carregando...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: \"Nome\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Nome\",\n          name: \"name\",\n          onChange: e => handleForm({\n            name: e.target.name,\n            value: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: \"CPF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"CPF\",\n          name: \"cpf\",\n          onChange: e => handleForm({\n            name: e.target.name,\n            value: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"book-seats\",\n      onClick: sendForm,\n      children: \"Reservar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), showtime.movie ? /*#__PURE__*/_jsxDEV(Footer, {\n      showtime: showtime.movie,\n      name: showtime.name,\n      weekday: showtime.day.weekday\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }, this) : '']\n  }, void 0, true);\n}\n\n_s(Seats, \"c1/cU7/gln0c1yxdc0Mj4cc6tPE=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c2 = Seats;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Seat\");\n$RefreshReg$(_c2, \"Seats\");","map":{"version":3,"names":["useParams","useNavigate","useEffect","useState","getSeats","postBooking","Footer","Seat","seat","selectSeat","isAvailable","selected","id","name","Seats","showtime","setShowtime","seats","setSeats","form","setForm","showtimeId","navigate","handleForm","value","console","log","sendForm","seatsId","filter","map","body","ids","state","seatId","newSeats","then","res","data","length","e","target","movie","day","weekday"],"sources":["/home/kauan/Documents/ProjetosDriven/projeto10-cineflex/projeto10-cineflex/src/components/Seats/Seats.js"],"sourcesContent":["import { useParams, useNavigate } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { getSeats, postBooking } from '../../services/cineflex';\nimport Footer from '../Footer';\n\nfunction Seat({ seat, selectSeat }) {\n  return (\n    <>\n      <span\n        className={`seat ${seat.isAvailable ? '' : 'unavailable'} ${\n          seat.selected ? 'selected' : ''\n        }`}\n        onClick={() => selectSeat(seat.id)}\n      >\n        {seat.name}\n      </span>\n    </>\n  );\n}\n\nexport default function Seats() {\n  const [showtime, setShowtime] = useState({});\n  const [seats, setSeats] = useState([]);\n  const [form, setForm] = useState({});\n  const { showtimeId } = useParams();\n  const navigate = useNavigate();\n\n  function handleForm({ value, name }) {\n    console.log(name, value);\n    setForm({\n      ...form,\n      [name]: value,\n    });\n  }\n  function sendForm() {\n    console.log(form);\n    const seatsId = seats\n      .filter((value) => value.selected)\n      .map((value) => value.id);\n    const body = {\n      ids: seatsId,\n      ...form,\n    };\n\n    navigate('/sucesso', {\n      state: {\n        showtime,\n        form,\n        seatsId,\n      },\n    });\n    // postBooking(body).then((res) => {\n    //   console.log(res.data);\n    //   navigate('/sucesso');\n    // });\n  }\n\n  function selectSeat(seatId) {\n    const newSeats = seats.map((value) => {\n      if (value.id === seatId && value.isAvailable) {\n        return {\n          ...value,\n          selected: !value.selected,\n        };\n      }\n      return {\n        ...value,\n      };\n    });\n\n    setSeats([...newSeats]);\n  }\n\n  useEffect(() => {\n    getSeats(showtimeId).then((res) => {\n      console.log(res.data);\n      setShowtime(res.data);\n      setSeats(res.data.seats);\n    });\n  }, []);\n\n  return (\n    <>\n      <div className=\"page-seats\">\n        <div className=\"page-title\">Selecione os assentos</div>\n        <div className=\"seat-list\">\n          {seats.length !== 0\n            ? seats.map((value) => (\n                <Seat key={value.id} seat={value} selectSeat={selectSeat} />\n              ))\n            : 'carregando...'}\n        </div>\n      </div>\n      <div className=\"form\">\n        <div className=\"input-group\">\n          <div className=\"title\">Nome</div>\n          <input\n            placeholder=\"Nome\"\n            name=\"name\"\n            onChange={(e) =>\n              handleForm({\n                name: e.target.name,\n                value: e.target.value,\n              })\n            }\n          ></input>\n        </div>\n        <div className=\"input-group\">\n          <div className=\"title\">CPF</div>\n          <input\n            placeholder=\"CPF\"\n            name=\"cpf\"\n            onChange={(e) =>\n              handleForm({\n                name: e.target.name,\n                value: e.target.value,\n              })\n            }\n          ></input>\n        </div>\n      </div>\n      <button className=\"book-seats\" onClick={sendForm}>\n        Reservar\n      </button>\n      {showtime.movie ? (\n        <Footer\n          showtime={showtime.movie}\n          name={showtime.name}\n          weekday={showtime.day.weekday}\n        />\n      ) : (\n        ''\n      )}\n    </>\n  );\n}\n"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,WAApB,QAAuC,kBAAvC;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,yBAAtC;AACA,OAAOC,MAAP,MAAmB,WAAnB;;;;AAEA,SAASC,IAAT,OAAoC;EAAA,IAAtB;IAAEC,IAAF;IAAQC;EAAR,CAAsB;EAClC,oBACE;IAAA,uBACE;MACE,SAAS,EAAG,QAAOD,IAAI,CAACE,WAAL,GAAmB,EAAnB,GAAwB,aAAc,IACvDF,IAAI,CAACG,QAAL,GAAgB,UAAhB,GAA6B,EAC9B,EAHH;MAIE,OAAO,EAAE,MAAMF,UAAU,CAACD,IAAI,CAACI,EAAN,CAJ3B;MAAA,UAMGJ,IAAI,CAACK;IANR;MAAA;MAAA;MAAA;IAAA;EADF,iBADF;AAYD;;KAbQN,I;AAeT,eAAe,SAASO,KAAT,GAAiB;EAAA;;EAC9B,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACc,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACgB,IAAD,EAAOC,OAAP,IAAkBjB,QAAQ,CAAC,EAAD,CAAhC;EACA,MAAM;IAAEkB;EAAF,IAAiBrB,SAAS,EAAhC;EACA,MAAMsB,QAAQ,GAAGrB,WAAW,EAA5B;;EAEA,SAASsB,UAAT,QAAqC;IAAA,IAAjB;MAAEC,KAAF;MAASX;IAAT,CAAiB;IACnCY,OAAO,CAACC,GAAR,CAAYb,IAAZ,EAAkBW,KAAlB;IACAJ,OAAO,CAAC,EACN,GAAGD,IADG;MAEN,CAACN,IAAD,GAAQW;IAFF,CAAD,CAAP;EAID;;EACD,SAASG,QAAT,GAAoB;IAClBF,OAAO,CAACC,GAAR,CAAYP,IAAZ;IACA,MAAMS,OAAO,GAAGX,KAAK,CAClBY,MADa,CACLL,KAAD,IAAWA,KAAK,CAACb,QADX,EAEbmB,GAFa,CAERN,KAAD,IAAWA,KAAK,CAACZ,EAFR,CAAhB;IAGA,MAAMmB,IAAI,GAAG;MACXC,GAAG,EAAEJ,OADM;MAEX,GAAGT;IAFQ,CAAb;IAKAG,QAAQ,CAAC,UAAD,EAAa;MACnBW,KAAK,EAAE;QACLlB,QADK;QAELI,IAFK;QAGLS;MAHK;IADY,CAAb,CAAR,CAVkB,CAiBlB;IACA;IACA;IACA;EACD;;EAED,SAASnB,UAAT,CAAoByB,MAApB,EAA4B;IAC1B,MAAMC,QAAQ,GAAGlB,KAAK,CAACa,GAAN,CAAWN,KAAD,IAAW;MACpC,IAAIA,KAAK,CAACZ,EAAN,KAAasB,MAAb,IAAuBV,KAAK,CAACd,WAAjC,EAA8C;QAC5C,OAAO,EACL,GAAGc,KADE;UAELb,QAAQ,EAAE,CAACa,KAAK,CAACb;QAFZ,CAAP;MAID;;MACD,OAAO,EACL,GAAGa;MADE,CAAP;IAGD,CAVgB,CAAjB;IAYAN,QAAQ,CAAC,CAAC,GAAGiB,QAAJ,CAAD,CAAR;EACD;;EAEDjC,SAAS,CAAC,MAAM;IACdE,QAAQ,CAACiB,UAAD,CAAR,CAAqBe,IAArB,CAA2BC,GAAD,IAAS;MACjCZ,OAAO,CAACC,GAAR,CAAYW,GAAG,CAACC,IAAhB;MACAtB,WAAW,CAACqB,GAAG,CAACC,IAAL,CAAX;MACApB,QAAQ,CAACmB,GAAG,CAACC,IAAJ,CAASrB,KAAV,CAAR;IACD,CAJD;EAKD,CANQ,EAMN,EANM,CAAT;EAQA,oBACE;IAAA,wBACE;MAAK,SAAS,EAAC,YAAf;MAAA,wBACE;QAAK,SAAS,EAAC,YAAf;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAK,SAAS,EAAC,WAAf;QAAA,UACGA,KAAK,CAACsB,MAAN,KAAiB,CAAjB,GACGtB,KAAK,CAACa,GAAN,CAAWN,KAAD,iBACR,QAAC,IAAD;UAAqB,IAAI,EAAEA,KAA3B;UAAkC,UAAU,EAAEf;QAA9C,GAAWe,KAAK,CAACZ,EAAjB;UAAA;UAAA;UAAA;QAAA,QADF,CADH,GAIG;MALN;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAWE;MAAK,SAAS,EAAC,MAAf;MAAA,wBACE;QAAK,SAAS,EAAC,aAAf;QAAA,wBACE;UAAK,SAAS,EAAC,OAAf;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UACE,WAAW,EAAC,MADd;UAEE,IAAI,EAAC,MAFP;UAGE,QAAQ,EAAG4B,CAAD,IACRjB,UAAU,CAAC;YACTV,IAAI,EAAE2B,CAAC,CAACC,MAAF,CAAS5B,IADN;YAETW,KAAK,EAAEgB,CAAC,CAACC,MAAF,CAASjB;UAFP,CAAD;QAJd;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAcE;QAAK,SAAS,EAAC,aAAf;QAAA,wBACE;UAAK,SAAS,EAAC,OAAf;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UACE,WAAW,EAAC,KADd;UAEE,IAAI,EAAC,KAFP;UAGE,QAAQ,EAAGgB,CAAD,IACRjB,UAAU,CAAC;YACTV,IAAI,EAAE2B,CAAC,CAACC,MAAF,CAAS5B,IADN;YAETW,KAAK,EAAEgB,CAAC,CAACC,MAAF,CAASjB;UAFP,CAAD;QAJd;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAdF;IAAA;MAAA;MAAA;MAAA;IAAA,QAXF,eAuCE;MAAQ,SAAS,EAAC,YAAlB;MAA+B,OAAO,EAAEG,QAAxC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAvCF,EA0CGZ,QAAQ,CAAC2B,KAAT,gBACC,QAAC,MAAD;MACE,QAAQ,EAAE3B,QAAQ,CAAC2B,KADrB;MAEE,IAAI,EAAE3B,QAAQ,CAACF,IAFjB;MAGE,OAAO,EAAEE,QAAQ,CAAC4B,GAAT,CAAaC;IAHxB;MAAA;MAAA;MAAA;IAAA,QADD,GAOC,EAjDJ;EAAA,gBADF;AAsDD;;GAnHuB9B,K;UAICd,S,EACNC,W;;;MALKa,K"},"metadata":{},"sourceType":"module"}